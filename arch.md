
---

# 📘 仕様書（Markdownエディタ / Electron版）

## 1. 概要

本アプリケーションは、Windows 11 上で動作する **Electron製Markdownエディタ** である。

プロジェクトフォルダを開き、Markdownファイルを編集・プレビューし、Qiita風スタイルでHTMLとして保存できる。

画像は自動でbase64形式に変換・埋め込みし、過大サイズの場合は自動リサイズされる。

---

## 2. 要件一覧

### 2.1 プロジェクト/ファイル管理

* プロジェクトフォルダを開ける
* サブフォルダ含めてツリー表示（左ペインに表示）
* 非表示ファイルは表示不要（例: `.gitignore`）

### 2.2 保存・読み込み

* 自動保存：編集中のファイルに対して即時上書き保存
* 保存形式：`.md`

### 2.3 Markdown仕様

* **GFM (GitHub Flavored Markdown)** 対応
  * 表
  * チェックリスト
  * コードブロック（シンタックスハイライト付き）
* 数式（LaTeX）は不要

### 2.4 画像処理

* 挿入時に **base64埋め込み**
* エディタ上では `![image_xxx.png]` の省略表記で表示
* 自動リサイズ機能：
  * 長辺を **1024px以内** に縮小（保持比率でリサイズ）

### 2.5 UI/レイアウト

* 左ペイン：フォルダツリー
* 中央ペイン：Markdownエディタ（等幅フォント固定）
* 右ペイン：プレビュー（Qiita風レンダリング）
* 各ペインはドラッグ可能なスプリッターでサイズ調整可能
* ダークモード：UI上のスイッチで切替（OS連動不要）

### 2.6 プレビュー

* 入力のたびに即時更新
* Qiita風のCSSでスタイリング（ダークモード時は調整版CSSを適用）

### 2.7 HTML出力

* 出力形式：**単一HTML（CSS埋め込み）**
* 出力場所：プロジェクトフォルダ直下
* 出力ファイル名：`[元ファイル名].html`

### 2.8 配布・動作環境

* 対応OS：Windows 11
* 配布形式：インストーラー（electron-builderで生成）
* Linux / Mac は非対応

---

## 3. 設計図

### 3.1 画面モック（テキストベース）

```
+-------------------------------------------------------------+
| [メニューバー] File | Export HTML | DarkMode [ON/OFF]       |
+-------------------------------------------------------------+
| [フォルダツリー]     |  [Markdownエディタ]   | [プレビュー]   |
|                      |  -------------------  | ------------- |
|  📂 project/         |  # タイトル           |   <h1>タイト… |
|   ├─ 📄 README.md    |  - [ ] タスク         |   <ul>…       |
|   ├─ 📄 note.md      |  ```js                |   <pre><code> |
|   └─ 📂 images/      |  console.log("hi");   |               |
|       └─ 📄 a.png    |  ```                  |               |
|                      |                       |               |
+-------------------------------------------------------------+
```

* 左：フォルダツリー（クリックでファイルオープン）
* 中：Markdownエディタ（入力エリア、自動保存）
* 右：プレビュー（Qiita風HTML表示）
* 上部：メニュー（エクスポート、ダークモード切替）

---

### 3.2 データフロー図（簡易版）

```
[ユーザー入力]
      |
      v
[Markdownエディタ] ----> [ファイルシステム(fs)]
      | (入力ごと即時更新)        |
      v                         v
[Markdown-it(GFM)]         [自動保存(上書き)]
      |
      v
[プレビュー(HTML + Qiita CSS)]
      |
      +--> [HTML出力機能] --> [単一HTMLファイル出力]
      |
      +--> [画像処理] --> [Base64埋め込み + 自動リサイズ]
```

---

## 4. 非機能要件

* 対象ファイルサイズ：制限なし
* パフォーマンス：
  * 入力即時プレビュー
  * 数百KB〜数MB程度のMarkdownでも快適に編集可能
* セキュリティ：
  * 外部リンクはサンドボックス処理
  * 実行可能スクリプトの埋め込みは無効化

---

## ✅ 今後のステップ

* 最小版（フォルダツリー + エディタ + プレビュー + 自動保存）から実装
* 次に **画像base64埋め込み & 自動リサイズ** を追加
* 仕上げに **HTML出力 & ダークモード** を実装
